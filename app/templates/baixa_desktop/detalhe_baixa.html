{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h4 class="text-primary"><i class="bi bi-clipboard-check"></i> Detalhes da Baixa</h4>

  <div class="card mb-3">
    <div class="card-body">
      <p><strong>Técnico:</strong> {{ baixa.tecnico.nome }}</p>
      <p><strong>Tipo de Serviço:</strong> {{ baixa.tipo_servico.nome }}</p>
      <p><strong>Data/Hora:</strong> {{ baixa.data_hora.strftime('%d/%m/%Y %H:%M') if baixa.data_hora else '' }}</p>
      <p><strong>Responsável:</strong> {{ baixa.responsavel }}</p>
      <p><strong>Observação:</strong> {{ baixa.observacao or '' }}</p>
    </div>
  </div>

  <form method="POST">
    <div class="table-responsive shadow-sm rounded mb-3">
      <table class="table table-bordered align-middle text-center">
        <thead class="table-light">
          <tr>
            <th>Selecionar</th>
            <th>Código</th>
            <th>Descrição</th>
            <th>Quantidade</th>
            <th>Saldo Atual</th>
          </tr>
        </thead>
        <tbody>
          {% for item, saldo in itens %}
          <tr>
            <td>
              <input type="checkbox" name="itens" value="{{ item.id }}" checked>
            </td>
            <td>{{ item.item.codigo }}</td>
            <td class="text-start">{{ item.item.descricao }}</td>
            <td>{{ item.quantidade }}</td>
            <td>{{ saldo or 0 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-between">
      <a href="{{ url_for('baixa_desktop.baixas_pendentes') }}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Voltar
      </a>
      <div>
        <button type="submit" name="recusar" class="btn btn-danger">
          <i class="bi bi-x-circle"></i> Recusar
        </button>
        <button type="submit" name="aprovar" class="btn btn-success">
          <i class="bi bi-check-circle"></i> Aprovar Selecionados
        </button>
      </div>
    </div>
  </form>
</div>
{% endblock %}
