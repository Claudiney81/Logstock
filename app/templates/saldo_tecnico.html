{% extends 'base.html' %} {% block content %}

<style>
  .tabela-container {
    max-height: 70vh; /* altura m√°xima ajust√°vel */
    overflow-y: auto;
  }
  .tabela-container table thead th {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: #002b55 !important;
    color: white !important;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    border-bottom: 2px solid #dee2e6;
    text-align: center;
  }
  .table-hover tbody tr:hover {
    background-color: #e9f4ff !important;
  }
  td {
    text-align: center;
    vertical-align: middle;
  }
  .badge {
    font-size: 0.85rem;
    font-weight: 500;
    padding: 0.35em 0.6em;
  }
</style>

<div class="container mt-4">
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %} {% for category, message in messages %}
  <div
    class="alert alert-{{ category }} alert-dismissible fade show"
    role="alert"
  >
    {{ message }}
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Fechar"
    ></button>
  </div>
  {% endfor %} {% endif %} {% endwith %}

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold">üìã Saldo por T√©cnico</h3>
    <form
      method="get"
      action="{{ url_for('saldo_tecnico.exibir_saldo') }}"
      class="d-flex gap-2"
    >
      <input
        type="text"
        name="tecnico"
        class="form-control"
        placeholder="Buscar t√©cnico por nome..."
        value="{{ termo_busca }}"
      />
      <button type="submit" class="btn btn-primary">
        <i class="bi bi-search"></i> Buscar
      </button>
    </form>
  </div>

  <div class="tabela-container shadow-sm rounded">
    <table class="table table-hover align-middle mb-0">
      <thead>
        <tr>
          <th>Nome</th>
          <th>√Årea T√©cnica</th>
          <th class="text-center">A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        {% for tecnico in tecnicos %}
        <tr>
          <td class="text-capitalize">{{ tecnico.nome }}</td>
          <td class="text-uppercase">{{ tecnico.area_tecnica or '-' }}</td>
          <td class="text-center">
            <a
              href="{{ url_for('saldo_tecnico.saldo_detalhado', id_tecnico=tecnico.id) }}"
              class="btn btn-sm btn-outline-primary me-1"
              title="Visualizar saldo"
            >
              <i class="bi bi-eye"></i>
            </a>
            <a
              href="{{ url_for('saldo_tecnico.exportar_saldo_tecnico', id_tecnico=tecnico.id) }}"
              class="btn btn-sm btn-outline-success"
              title="Exportar Excel"
            >
              <i class="bi bi-file-earmark-excel"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
