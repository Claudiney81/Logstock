{% extends "base.html" %} {% block content %}
<style>
  .tabela-container {
    max-height: 70vh; /* altura ajust√°vel */
    overflow-y: auto;
  }
  .tabela-container table thead th {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: #002b55;
    color: white;
  }
</style>

<div class="container mt-4">
  <h2 class="mb-4">Requisi√ß√µes Recebidas</h2>

  {% if requisicoes %}
  <div class="tabela-container shadow-sm mb-4 border rounded">
    <table class="table table-hover table-bordered align-middle mb-0">
      <thead>
        <tr>
          <th>Status</th>
          <th>Respons√°vel</th>
          <th>Resp. Projeto</th>
          <th>T√©cnico</th>
          <th>Tipo de Servi√ßo</th>
          <th>Data/Hora</th>
          <th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody>
        {% for req in requisicoes %}
        <tr>
          <td class="text-center">
            {% if req.status == 'pendente' %}
            <span title="Pendente">üßçüèª‚Äç‚ôÇÔ∏è‚ùó</span>
            {% endif %}
          </td>
          <td>{{ req.solicitante_responsavel }}</td>
          <td>{{ req.resp_projeto or '' }}</td>
          <td>{{ req.solicitante_tecnico }}</td>
          <td>{{ req.tipo_servico }}</td>
          <td>{{ req.data_hora.strftime('%d/%m/%Y %H:%M') }}</td>
          <td>
            <a
              href="{{ url_for('requisicoes_tecnicos.detalhes', requisicao_id=req.id) }}"
              class="btn btn-sm btn-primary"
            >
              Visualizar
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p>Nenhuma requisi√ß√£o pendente.</p>
  {% endif %}
</div>
{% endblock %}
